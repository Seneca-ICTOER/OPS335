<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab8">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/OPS335/img/pwa/icon-512x512.png">
<link rel="manifest" href="/OPS335/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/OPS335/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/OPS335/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/OPS335/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 8 | OPS335 - Open System Application Server</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//OPS335/A-Labs/lab8"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 8 | OPS335 - Open System Application Server"><meta data-rh="true" name="description" content="Lab 8"><meta data-rh="true" property="og:description" content="Lab 8"><link data-rh="true" rel="icon" href="/OPS335/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//OPS335/A-Labs/lab8"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS335/A-Labs/lab8" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS335/A-Labs/lab8" hreflang="x-default"><link rel="stylesheet" href="/OPS335/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/OPS335/assets/js/runtime~main.d5c669e0.js" as="script">
<link rel="preload" href="/OPS335/assets/js/main.293728ce.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/OPS335/"><div class="navbar__logo"><img src="/OPS335/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OPS335/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OPS335 - Open System Application Server</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS335/">Welcome to OPS335</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS335/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/OPS335/A-Labs/installation-lab0">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/installation-lab0">Installation Prep Lab 0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab2a">Lab 2a</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab2b">Lab 2b</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab4a">Lab 4a</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab4b">Lab 4b</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS335/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OPS335/A-Labs/lab8">Lab 8</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS335/B-Assignments/assignment1-part1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS335/C-ExtraResources/resources">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OPS335/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 8</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 8 - OpenLDAP</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objective-and-preparation">Objective and Preparation<a class="hash-link" href="#objective-and-preparation" title="Direct link to heading">​</a></h2><ul><li>Learn some fundamental concepts and terminology used with LDAP.</li><li>Practice creating users in OpenLDAP.</li><li>Set up linux machines to authenticate against an OpenLDAP server.</li><li>Learn to update LDAP information with ldif files.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="online-resources">Online Resources<a class="hash-link" href="#online-resources" title="Direct link to heading">​</a></h3><p>We&#x27;ll use OpenLDAP in this course.</p><p>The purpose of LDAP the way it&#x27;s used most of the time is relatively intuitive, but the implementation details will take longer to understand.</p><p>LDAP is a generic directory access protocol, but we&#x27;ll look at it specifically as a server containing user credentials that can be used for authorization on multiple machines.</p><p>You should read as much of the <a href="https://www.openldap.org/doc/admin24/" target="_blank" rel="noopener noreferrer">OpenLDAP Administration Guide</a> as you can handle. You&#x27;ll find that parts of it make no sense at first, but as you get more practice with the software and the concepts they become easier to understand. As a minimum, read:</p><ul><li>The introduction.</li><li>The quick start guide.</li><li>The configuration layout part of &quot;Configuring slapd&quot;.</li><li>There is a glossary at the end of the guide. It&#x27;s not complete and it doesn&#x27;t have any details, but it&#x27;s a good place to look when you get confused by weird-looking shorthands like dc, dn, or cn.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-1-connecting-a-client-machine-to-an-ldap-server">Investigation 1: Connecting a Client Machine to an LDAP server<a class="hash-link" href="#investigation-1-connecting-a-client-machine-to-an-ldap-server" title="Direct link to heading">​</a></h2><p>You won&#x27;t be asked to set up an OpenLDAP server from scratch, we don&#x27;t have time for that. So you can start with a VM I made for you.</p><p>Download <a href="https://scs.senecacollege.ca/~andrew.smith/ops335/vm4.qcow2.gz" target="_blank" rel="noopener noreferrer">the disk image here</a>, extract it into <strong>images</strong> directory and set it up by &quot;Importing existing disk image&quot;:</p><ul><li>You only need 512MB of RAM.</li><li>Connect it to your ops335 network.</li><li>Change its IP address, gateway, DNS server address, hostname (FQDN) and DOMAIN/SEARCH parameter to match your network configuration.</li><li>You may find it helpful to add a record for vm4 in your DNS, and set up ssh-keys login to vm4.</li></ul><p>The <strong>root</strong> password is <strong>seneca99</strong>.</p><p>OpenLDAP has been set up on it using <a href="https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html" target="_blank" rel="noopener noreferrer">this itzgeek guide</a>. You should read that guide even though you don&#x27;t need to perform all those steps yourself.</p><p>This OpenLDAP server (vm4) has been set up with:</p><ul><li>The Domain Components <code>dc=andrew,dc=ops</code></li><li>The admin username <code>ldaproot</code> and the password <code>seneca99ldap</code></li><li>An Organisation Unit named <code>People</code>, for regular users.</li><li>With one regular user <code>john</code>, whose password you should change using the <strong>ldappasswd</strong> command.</li></ul><p>The rest of your tasks for this section of the lab are to set up your vm1/vm2/vm3 to authenticate using the LDAP service hosted on vm4.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-2-adding-users-to-ldap">Investigation 2: Adding Users to LDAP<a class="hash-link" href="#investigation-2-adding-users-to-ldap" title="Direct link to heading">​</a></h2><p>Perform the Following steps on your LDAP server VM:</p><ul><li>Before we start adding users, we need to tell the tool that is going to translate between normal user accounts and LDAP structure a little about our domain.</li><li>Make a backup of the <strong>/usr/share/migrationtools/migrate_common.ph</strong> to the <strong>/root</strong> directory.</li></ul><p>Modify the following parameters in the <strong>original</strong> file to the values shown below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$DEFAULT_MAIL_DOMAIN</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;andrew.ops&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$DEFAULT_BASE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dc=andrew,dc=ops&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$EXTENDED_SCHEMA</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Add/Create a new user to this machine with your senecaID and a UID of 10000. Set their password as well.</li><li>Migrating them into LDAP will take several steps:</li><li>Extract the passwd entries of your new user from /etc/passwd to a file called ldapusers.entry</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -w </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/passwd </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /root/ldapusers.entry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Use the <strong>migrate_passwd.pl</strong> file to convert the user information you extracted earlier into an ldif file:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/migrationtools/migrate_passwd.pl /root/ldapusers.entry /root/ldapusers.ldif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This should generate an ldif file similar to the following:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dn: </span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">,ou</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">People,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">andrew,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uid: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sn: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mail: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">@andrew.ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: organizationalPerson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: inetOrgPerson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: posixAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: </span><span class="token function" style="color:#d73a49">top</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: shadowAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userPassword: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">crypt</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$6</span><span class="token variable" style="color:#36acaa">$PBqQXRo</span><span class="token plain">/ugCCjBe0.ZgvmJl8U2tVjpdR8X9bh4OZ1cl3mv4xf0Hv1HSDavkxusO8R3lI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uuJ7skrfqpTQpbZ6hbd3e3BGB.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowLastChange: </span><span class="token number" style="color:#36acaa">17120</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowMin: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowMax: </span><span class="token number" style="color:#36acaa">99999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowWarning: </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loginShell: /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uidNumber: </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gidNumber: </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">homeDirectory: /home/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Use the <strong>ldapadd</strong> command to enter this new information into the database (see the Itzgeek <a href="https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html/2" target="_blank" rel="noopener noreferrer">tutorial</a> for an example). Use simple authentication, the distinguished name of the ldap administrator, and get prompted for a password.</li><li>Use <strong>ldapsearch</strong> to confirm that the new users have been added to the database. You should get output similar to the following:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># extended LDIF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># LDAPv3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># base &lt;dc=andrew,dc=ops&gt; with scope subtree</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># filter: (objectClass=*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># requesting: ALL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># andrew.ops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: </span><span class="token assign-left variable" style="color:#36acaa">dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">andrew,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: </span><span class="token function" style="color:#d73a49">top</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: dcObject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: organization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">o: andrew ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dc: andrew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ldaproot, andrew.ops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: </span><span class="token assign-left variable" style="color:#36acaa">cn</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ldaproot,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">andrew,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: organizationalRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn: ldaproot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">description: LDAP Manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># People, andrew.ops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: </span><span class="token assign-left variable" style="color:#36acaa">ou</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">People,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">andrew,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: organizationalUnit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ou: People</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># &lt;your username&gt;, People, andrew.ops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: </span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">,ou</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">People,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">andrew,dc</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uid: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cn: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sn: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mail: </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">@andrew.ops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: personobjectClass: organizationalPerson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: inetOrgPerson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: posixAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: </span><span class="token function" style="color:#d73a49">top</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: shadowAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userPassword:: e2NyeXB0fSQ2JFBCcVFYUm8vJHVnQ0NqQmUwLlpndm1KbDhVMnRWanBkUjhYOWJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oNE9aMWNsM212NHhmMEh2MUhTRGF2a3h1c084UjNsSXV1Sjdza3JmcXBUUXBiWjZoYmQzZTNCR0Iu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowLastChange: </span><span class="token number" style="color:#36acaa">17120</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowMin: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowMax: </span><span class="token number" style="color:#36acaa">99999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shadowWarning: </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loginShell: /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uidNumber: </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gidNumber: </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">homeDirectory: /home/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your username</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># search result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search: </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> Success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># numResponses: 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># numEntries: 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Repeat the process to create two more users:<ul><li>jane with the UID 10001 and full name Jane Greystoke</li><li>guest with the uid 10002 and full name Andrew&#x27;s Guests</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-3-authenticating-against-ldap">Investigation 3: Authenticating against LDAP<a class="hash-link" href="#investigation-3-authenticating-against-ldap" title="Direct link to heading">​</a></h2><ul><li>Read the <a href="https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html/2" target="_blank" rel="noopener noreferrer">second</a> page of the <strong>Itzgeek guide</strong> for instructions on how to configure a CentOS machine to authenticate against an LDAP server.</li><li>Prior to doing anything with it, backup your current configuration</li><li>Follow those instructions for <strong>vm1</strong>, <strong>vm2</strong>, and <strong>vm3</strong>. Make sure that you update the IP address of your server in the arguments to the <strong>authconfig</strong> command.</li><li>Confirm that you can log in using all three usernames on all your nested VMs (except vm4).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-4-using-ldif-files">Investigation 4: Using Ldif Files<a class="hash-link" href="#investigation-4-using-ldif-files" title="Direct link to heading">​</a></h2><p>An important capability of ldap is the ability to update the information in the database.</p><ul><li>Most updates will be run with specially formatted ldif files. These use the same structure as the files you created to add users, but will be shorter as they will only be changing one attribute.</li><li>Each entry in an ldif file identifies an object to work with, and a changetype (which is an action to take on that object). Depending on the changetype, there might be an extra line for information to be changed or added.</li><li>Write an ldif file called <strong>update1.ldif</strong> that will <strong>add</strong> the attribute <strong>roomNumber</strong> to the user with your username. Set the value of roomNumber to be the room your class takes place in (or any room number if you are taking the course online).</li><li>Use <strong>ldapmodify</strong> to apply this file to your database, then run <strong>ldapsearch</strong> to confirm the new entry has been added.</li><li>Write a new ldif file called <strong>update2.ldif</strong> that will <strong>replace</strong> the <strong>mail</strong> address of the user with your username so that it has your actual Seneca email address. Use <strong>ldapmodify</strong> again to apply this change to the database.</li><li>Write a third ldif file called <strong>update3.ldif</strong> to <strong>delete</strong> the user <strong>john</strong> from the database, then apply that change using <strong>ldapmodify</strong> again.</li><li>Use <strong>ldapsearch</strong> to confirm that these changes have taken place.</li><li>Note that it is possible to write ldif files to make multiple changes at once, but that is beyond this course.</li></ul><p><strong>Record steps, commands, and your observations in all INVESTIGATIONS here in your OPS335 lab log-book</strong></p><p><strong>Backup your VMs!:</strong> You MUST perform a <strong>full backup</strong> of ALL of your VMs whenever you complete your <strong>OPS335 labs</strong> or when working on your <strong>OPS335 assignments</strong>. You should be using the dump or rsync command, and you should use the Bash shell script that you were advised to create in order to backup all of your VMs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completing-the-lab">Completing The Lab<a class="hash-link" href="#completing-the-lab" title="Direct link to heading">​</a></h2><p>You have now learned how to connect a client machine to an existing LDAP server for centralized authentication, as well as how to update the information held in that server.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="online-submission">Online Submission<a class="hash-link" href="#online-submission" title="Direct link to heading">​</a></h3><p>Follow the instructions for lab 8 on blackboard.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exploration-questions">Exploration Questions<a class="hash-link" href="#exploration-questions" title="Direct link to heading">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/OPS335/tree/main/docs/A-Labs/lab8.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/OPS335/A-Labs/lab7"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 7</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OPS335/B-Assignments/assignment1-part1"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Assignment 1 (Part 1)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective-and-preparation" class="table-of-contents__link toc-highlight">Objective and Preparation</a><ul><li><a href="#online-resources" class="table-of-contents__link toc-highlight">Online Resources</a></li></ul></li><li><a href="#investigation-1-connecting-a-client-machine-to-an-ldap-server" class="table-of-contents__link toc-highlight">Investigation 1: Connecting a Client Machine to an LDAP server</a></li><li><a href="#investigation-2-adding-users-to-ldap" class="table-of-contents__link toc-highlight">Investigation 2: Adding Users to LDAP</a></li><li><a href="#investigation-3-authenticating-against-ldap" class="table-of-contents__link toc-highlight">Investigation 3: Authenticating against LDAP</a></li><li><a href="#investigation-4-using-ldif-files" class="table-of-contents__link toc-highlight">Investigation 4: Using Ldif Files</a></li><li><a href="#completing-the-lab" class="table-of-contents__link toc-highlight">Completing The Lab</a><ul><li><a href="#online-submission" class="table-of-contents__link toc-highlight">Online Submission</a></li></ul></li><li><a href="#exploration-questions" class="table-of-contents__link toc-highlight">Exploration Questions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OPS335 - Open System Application Server</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/OPS335/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/OPS335/assets/js/runtime~main.d5c669e0.js"></script>
<script src="/OPS335/assets/js/main.293728ce.js"></script>
</body>
</html>